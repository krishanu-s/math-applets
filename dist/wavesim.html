<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>wave equation demo</title>
        <base href="." />
        <script>
            MathJax = {
                tex: {
                    inlineMath: { "[+]": [["$", "$"]] },
                },
            };
        </script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"
        ></script>
        <script type="module" src="wavesim_scene.js"></script>
        <style>
            .row {
                display: flex;
                align-items: center; /* Centers vertically */
            }
            .applet-container {
                display: flex;
                justify-content: center; /* Centers horizontally */
                align-items: center; /* Centers vertically */
                width: 50%; /* A width less than 100% is required */
                margin-left: auto;
                margin-right: auto;
                padding: 20px;
                text-align: center;
                font-family: Arial, sans-serif;
            }
            .slider {
                display: flex;
                justify-content: center; /* Centers horizontally */
                align-items: center; /* Centers vertically */
                width: 50%;
                height: 25px;
                margin: 20px 0;
                margin-left: auto;
                margin-right: auto;
            }
        </style>
    </head>

    <body>
        <div style="text-align: center; margin: 10px auto">
            <h1>Light, sound, and propagating waves</h1>
            <h3>Simulating the wave equation</h3>
            <p>
                The <b>wave equation</b> is a partial differential equation that
                describes the propagation of waves through a medium, such as
                mechanical waves (such as sound) through air or water, or
                electromagnetic waves (such as visible light or radio waves)
                through vacuum or glass.
            </p>
            <p>
                The two-dimensional wave equation can be used to visualize waves
                propagating in a two-dimensional medium, such as ripples on the
                surface of water. Each point in the $xy$-plane has an associated
                real-numbered value, and this collection of values evolves
                through time. I've used a color map where
                <font color="red">red</font> indicates a positive value,
                <font color="blue">blue</font> indicates a negative value, and
                <font color="grey">white</font>
                indicates zero. The applet below simulates a
                <b>dipole</b>, where the wave equation has two point sources
                with opposite phase.
            </p>
            <div class="applet-container" id="twodim-dipole-demo"></div>
            <br />
            <div class="button" id="twodim-dipole-demo-pause-button"></div>
            <div class="button" id="twodim-dipole-demo-clear-button"></div>
            <br />
            <div class="slider" id="twodim-dipole-demo-slider-1"></div>
            <p>
                The behavior of the wave surface is determined by a set of
                <b>boundary conditions</b>, and the wave equation which governs
                its evolution over time. It's similar to how a pendulum's motion
                is fully determined by its initial position and velocity (the
                boundary conditions), and the pendulum's length, mass and
                strength of gravity (which determine the differential equation).
            </p>
            <p>
                We can make these two pieces more precise for the wave equation.
                The values of the heatmap can be represented by a function in
                three variables: the two spatial variables $x$ and $y$, and the
                time variable $t \ge 0$. We can denote this by $f(x, y, t)$. The
                wave equation is the partial differential equation which
                indicates how the function changes over time and space every
                inside the domain:
            </p>
            <div id="2d-wave-equation">
                $$\left(\frac{\partial}{\partial t}\right)^2f =
                \left(\frac{\partial}{\partial x}\right)^2f +
                \left(\frac{\partial}{\partial y}\right)^2f$$
            </div>
            <p>
                Boundary conditions are locations in space and time where the
                function does not evolve according to the wave equation, but is
                forced to evolve some other way. One such example is to specify
                <b>point sources</b> $(x, y)$ where the function value varies
                sinusoidally, i.e. goes as $A\cos(\omega \cdot (t - \phi))$ for
                some amplitude $A$, frequency $\omega$, and phase $\phi$. Such
                points can be viewed as sources for propagating waves. For
                example, above we have two point sources which are fully
                out-of-phase with each other (i.e. phase difference $\pi$).
            </p>
            <!--<p>
                When a line of point sources with amplitude zero are specified,
                they act as a <b>reflector</b> for incoming waves. (TODO Make
                another demo)
            </p>-->
            <h3>Connection to light and sound</h3>
            <p>
                As mentioned in the opening paragraph, electromagnetic radiation
                (such as light) and sound propagate as <b>waves</b>. There is
                another familiar model we use for envisioning light, namely as
                <b>rays</b>. A wonderful fact about ellipses is as follows:
                <b
                    >if you shoot a ray out from one focus and it reflects off
                    the ellipse, it will converge on the other focus. Moreover,
                    the total distance traveled from one focus to the other is
                    independent of the initial angle of the ray.</b
                >
            </p>
            <p>
                The analogous statement for a parabola, whose second focus lies
                at infinity, is:
                <b
                    >multiply rays emanating at the same speed from the focus
                    and reflecting off the parabola will then end up traveling
                    parallel to the axis of symmetry, all lying on a line
                    perpendicular to said axis.</b
                >
                This is, for example, how flashlights work, by reflecting light
                from a point source off a parabolic reflector to convert it into
                a unidirectional beam. Taking the reverse problem, parabolic
                satellite dishes and directional microphones work by focusing a
                distant source of radiation onto a single point by reflecting it
                off a parabolic reflector.
            </p>
            <br />
            <div class="applet-container" id="conic-rays"></div>
            <br />
            <div class="slider" id="conic-rays-eccentricity-slider"></div>
            <br />
            <div class="slider" id="conic-rays-pause-button"></div>
            <br />
            <p>
                The question I want to investigate is:
                <b
                    >does this property of conic sections still hold when the
                    ray-model is replaced by the wave-model?</b
                >
            </p>
            <p>
                More generally,
                <b
                    >how much does qualitative intuition carry over between the
                    two models?</b
                >
                There are definitely behaviors which differ between the two
                models: for example, light and sound cannot bend around a corner
                in the ray model, but they can in the wave model. (TODO example)
                The
                <a href="https://en.wikipedia.org/wiki/Double-slit_experiment"
                    >double-slit experiment</a
                >, which demonstrates the existence of wave interference, is the
                prototypical example of qualitative behavior which is captured
                by the wave model and not by the ray model. I've read that when
                the wavelength is much smaller than any physical features, the
                ray model is a good approximation of the wave model -- this
                holds true for visible light at macroscopic scales, but does not
                hold for sound waves.
            </p>
            <p>
                First, let's decipher the differential equation above into plain
                English, by thinking from first principles.
            </p>
            <h2>Origin of the wave equation: vibrating springs</h2>

            <p>
                Let's simplify the
                <a href="./wavesim.html#2d-wave-equation"
                    >two-dimensional wave equation</a
                >
                by first considering the <b>zero-dimensional wave equation</b>.
                For a function $f(t)$ with a single variable $t$ representing
                time, the zero-dimensional wave equation has the form
            </p>
            <div id="0d-wave-equation">$$f''(t) = -f(t)$$</div>
            <p>
                This equation describes the horizontal position of a point mass
                attached to a (idealized)
                <a href="https://en.wikipedia.org/wiki/Hooke%27s_law">spring</a
                >, where the force (second-derivative) is proportional and
                opposite to the displacement from equilibrium. For a spring with
                spring constant $k$ (representing the <b>stiffness</b>), the
                equation becomes (we have normalized mass to 1) $$f''(t) = -k
                f(t)$$ In the applet below, the point mass is represented by a
                black square and can be dragged horizontally to change its
                position. Its equilibrium position is depicted by a dashed line,
                and the force acting on the mass is shown as a red arrow. By
                clicking the play button, you can observe how the mass moves
                over time. To its right, the position $f(t)$ is graphed through
                time. This forward-evolution through time is analogous to the
                forward-evolution of the wave equation.
            </p>

            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-spring"
                ></div>
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-graph"
                ></div>
            </div>
            <br />
            <div class="button" id="point-mass-spring-pause-button"></div>
            <div class="button" id="point-mass-spring-reset-button"></div>
            <div class="slider" id="point-mass-stiffness-slider"></div>
            <div class="slider" id="point-mass-damping-slider"></div>
            <br />

            <p>
                Next, let's consider a sequence of point masses, connected by
                springs. The leftmost and rightmost masses are fixed in place at
                positions $L$ and $R$, while the middle masses (let's say there
                are $N$ of them) are free to move up and down along vertical
                tracks. Their displacements from their equilibrium positions
                (now depicted
                <i>vertically</i>, instead of horizontally as before) are
                denoted by $f_1(t), f_2(t), f_3(t), \ldots, f_N(t)$. Note that
                the equilibrium state of the system is where the points form a
                straight line stretching from the left side to the right side,
                because the shortest path between two points is a line.
            </p>
            <p>
                Each point mass experiences a force from both sides. The force
                exerted from the left on the $i$-th mass has vertical component
                equal to $-k(f_i(t) - f_{i-1}(t))$, where $k$ is the spring
                constant. Similarly, the force exerted from the right on the
                $i$-th mass has vertical component equal to $-k(f_i(t) -
                f_{i+1}(t))$. Added together, we get the equations
            </p>
            <div id="1d-discrete-wave-equation">
                $$f_1''(t) = k(L-2f_1(t)+ f_2(t))$$ $$f_2''(t) =
                k(f_1(t)-2f_2(t) + f_3(t))$$ $$f_3''(t) = k(f_2(t)-2f_3(t)+
                f_4(t))$$ $$\vdots$$ $$f_N''(t) = k(f_{N-1}(t)-2f_N(t)+ R)$$
            </div>
            <!--TODO Need to address the normalization by distance and strength of the springs.-->
            <!--TODO Add a force diagram explaining this, showing that the pull is towards the midpoint. -->
            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-discrete-sequence"
                ></div>
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-discrete-sequence-diagram"
                ></div>
            </div>
            <br />
            <div
                class="button"
                id="point-mass-discrete-sequence-pause-button"
            ></div>
            <div
                class="button"
                id="point-mass-discrete-sequence-reset-button"
            ></div>
            <div
                class="slider"
                id="point-mass-discrete-sequence-stiffness-slider"
            ></div>
            <div
                class="slider"
                id="point-mass-discrete-sequence-friction-slider"
            ></div>

            <p>
                Now imagine the limit of the scenario above as the number $N$ of
                point masses goes to infinity. This is a mental model for an
                elastic object such as a rubber band or a spring. Instead of $N$
                displacement functions $f_1(t), f_2(t), \ldots, f_N(t)$, we now
                have an entire continuum of them, represented by a two-variable
                function $f(x,t)$. Writing $f''(x, t)$ is now vague: do we mean
                the second derivative with respect to $t$, or respect to $x$? We
                therefore write these two possible second derivatives as
                $\frac{\partial^2}{\partial t^2}f(x,t)$ and
                $\frac{\partial^2}{\partial x^2}f(x,t)$, respectively. The
                sequence of $N$ differential equations from before become a
                single partial differential equation: the
                <b>one-dimensional wave equation</b>.
            </p>
            <div id="1d-wave-equation">
                $$\frac{\partial^2}{\partial t^2}f(x,t) =
                k\frac{\partial^2}{\partial x^2}f(x,t)$$
            </div>
            <p>
                This is a consequence of the fact that for a function $g(x)$,
                the second derivative can be expressed as $$g''(x) =
                \lim\limits_{h \to 0}\frac{g(x+h) - 2g(x) + g(x-h)}{h^2}$$
            </p>
            <!--TODO This aside deserves a visualizer-->
            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-continuous-sequence"
                ></div>
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="point-mass-continuous-sequence-diagram"
                ></div>
            </div>
            <br />
            <div
                class="slider"
                id="point-mass-continuous-sequence-zoom-slider"
            ></div>
            <br />
            <div
                class="button"
                id="point-mass-continuous-sequence-pause-button"
            ></div>
            <div
                class="button"
                id="point-mass-discrete-sequence-reset-button"
            ></div>
            <div
                class="slider"
                id="point-mass-discrete-sequence-stiffness-slider"
            ></div>
            <div
                class="slider"
                id="point-mass-discrete-sequence-friction-slider"
            ></div>
            <br />
            <p>
                The one-dimensional wave equation exhibits much richer behavior
                than the zero-dimensional wave equation. On the left, we see
                that an oscillating point source in the middle of an
                <b>unbound</b> string generates waves which propagate outwards.
                On the right, we see that on a <b>bound</b> string (where both
                endpoints are held at fixed positions) waves reflect off the
                ends.
            </p>

            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="wavesim-1d-pml"
                ></div>
                <div
                    style="width: 50%"
                    class="applet-container"
                    id="wavesim-1d-impulse"
                ></div>
                =
            </div>
            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="button"
                    id="wavesim-1d-pml-pause-button"
                ></div>
                <div
                    style="width: 50%"
                    class="button"
                    id="wavesim-1d-impulse-pause-button"
                ></div>
            </div>
            <br />
            <div style="width: 100%" class="row">
                <div
                    style="width: 50%"
                    class="button"
                    id="wavesim-1d-pml-reset-button"
                ></div>
                <div
                    style="width: 50%"
                    class="button"
                    id="wavesim-1d-impulse-reset-button"
                ></div>
            </div>
            <br />
            <p>
                With the above examples in mind, we can now explore the
                <b>two-dimensional wave equation</b>. The sequence of point
                masses used in the one-dimensional case is replaced by a
                two-dimensional grid of point masses, with each mass connected
                to its horizontal and vertical neighbors and allowed to move in
                the third dimension orthogonal to the plane of the grid. We can
                visualize
            </p>

            <br />
            <div
                class="applet-container"
                id="point-mass-discrete-lattice"
            ></div>
            <br />
            <div
                class="slider"
                id="point-mass-discrete-lattice-stiffness-slider"
            ></div>
            <br />
            <div
                class="button"
                id="point-mass-discrete-lattice-pause-button"
            ></div>
            <br />
            <h2>Refraction and reflection</h2>
            <p>
                TODO Go back to one of the original examples and make the spring
                stiffness interactively change-able. See that this determines
                propagation speed.
            </p>
            <p>
                TODO Show refraction in 2D with a change of materials and a
                plane wave.
            </p>

            <br />
            <div class="applet-container" id="line-source-heatmap"></div>
            <br />
            <div class="button" id="line-source-heatmap-pause-button"></div>
            <br />
            <p>
                TODO Show that a boundary condition of 0 is effectively a
                reflective surface. First show in 1D, then in 2D.
            </p>
            <p>TODO Figure out what to depict after this?</p>
        </div>
        <a href="./index.html">back to main page</a>
        <br />
        <a href="https://www.ksankar.me">back to Krishanu Sankar's homepage</a>
    </body>
</html>
